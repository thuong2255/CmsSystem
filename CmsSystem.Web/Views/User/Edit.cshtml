@model CmsSystem.Web.Models.UserVm

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="content">
    <div class="row">
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Cập nhật người dùng</h3>
                </div><!-- /.box-header -->
                @using (Html.BeginForm("Edit", "User", FormMethod.Post))
                {
                    @Html.AntiForgeryToken()

                    @Html.HiddenFor(m => m.Id)
                    @Html.HiddenFor(m => m.CreatedDate)
                    @Html.HiddenFor(m => m.Salt)
                    @Html.HiddenFor(m => m.Password)
                    <div class="box-body">
                        <div class="form-group">
                            @Html.LabelFor(m => m.FullName)
                            @Html.TextBoxFor(m => m.FullName, new { @class = "form-control" })
                            @Html.ValidationMessageFor(x => x.FullName, "", new { @class = "text-danger" })
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.UserName)
                            @Html.TextBoxFor(m => m.UserName, new { @class = "form-control" })
                            @Html.ValidationMessageFor(x => x.UserName, "", new { @class = "text-danger" })
                        </div>
                        @*<div class="form-group">
                            @Html.LabelFor(m => m.Password)
                            @Html.TextBoxFor(m => m.Password, new { @class = "form-control" })
                            @Html.ValidationMessageFor(x => x.Password, "", new { @class = "text-danger" })
                        </div>*@
                        <div class="form-group">
                            @Html.LabelFor(m => m.Address)
                            @Html.TextBoxFor(m => m.Address, new { @class = "form-control" })
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.Email)
                            @Html.TextBoxFor(m => m.Email, new { @class = "form-control" })
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.Mobile)
                            @Html.TextBoxFor(m => m.Mobile, new { @class = "form-control" })
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.Description)
                            @Html.TextBoxFor(m => m.Description, new { @class = "form-control" })
                        </div>
                        <div class="checkbox">
                            @Html.CheckBoxFor(m => m.IsAdmin, new { @checked = "checked", @style = "margin-left:0px" }) <label>@Html.LabelFor(m => m.IsAdmin)</label>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.Status)
                            @Html.DropDownList("Status", null, new { @class = "form-control" })
                        </div>
                    </div>

                    <div class="box-footer">
                        <div class="pull-left">
                            @Html.ActionLink("Quay lại", "Index", null, new { @class = "btn btn-success" })
                        </div>
                        <div class="pull-right">
                            <button type="submit" class="btn btn-primary">Cập nhật</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</section>


<script type="text/javascript">
    $('.js-delete').on('click', function () {
        var button = $(this);
        var data = {
            id: button.attr("data-menu-id")
        }
        if (confirm("Bạn có chắc chắn muốn xóa ?")) {
            $.ajax({
                url: '@Url.Action("Delete","User")',
                type: "POST",
                data: data,
                dataType: 'json',
                success: function (data) {
                    if (data.status) {
                        button.parents("tr").remove();
                        alert("Xóa thành công");
                    }
                },
                error: function (error) {
                    alert("Error: " + error.responseText);
                }
            });
        }
    });
</script>

